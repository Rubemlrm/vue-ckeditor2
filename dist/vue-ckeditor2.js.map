{"version":3,"file":"vue-ckeditor2.js","sources":["../src/Ckeditor.vue"],"sourcesContent":["<template>\r\n  <div class=\"ckeditor\">\r\n    <textarea\r\n      :name=\"name\"\r\n      :id=\"id\"\r\n      :value=\"value\"\r\n      :types=\"types\"\r\n      :config=\"config\"\r\n      :read-only=\"readOnly\"\r\n    >\r\n    </textarea>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  let inc = new Date().getTime();\r\n\r\n  export default {\r\n    name: \"vue-ckeditor\",\r\n    props: {\r\n      name: {\r\n        type: String,\r\n        default: () => `editor-${++inc}`\r\n      },\r\n      value: {\r\n        type: String\r\n      },\r\n      id: {\r\n        type: String,\r\n        default: () => `editor-${inc}`\r\n      },\r\n      types: {\r\n        type: String,\r\n        default: () => `classic`\r\n      },\r\n      config: {\r\n        type: Object,\r\n        default: () => {\r\n          return {\r\n            toolbar: [\r\n              { name: \"clipboard\", items: [\"Undo\", \"Redo\"] },\r\n              {\r\n                name: \"basicstyles\",\r\n                items: [\r\n                  \"Bold\",\r\n                  \"Italic\",\r\n                  \"Underline\",\r\n                  \"Strike\",\r\n                  \"RemoveFormat\",\r\n                  \"CopyFormatting\"\r\n                ]\r\n              },\r\n              {\r\n                name: \"align\",\r\n                items: [\r\n                  \"JustifyLeft\",\r\n                  \"JustifyCenter\",\r\n                  \"JustifyRight\",\r\n                  \"JustifyBlock\"\r\n                ]\r\n              },\r\n              {\r\n                name: \"paragraph\",\r\n                items: [\r\n                  \"NumberedList\",\r\n                  \"BulletedList\",\r\n                  \"-\",\r\n                  \"Outdent\",\r\n                  \"Indent\",\r\n                  \"-\",\r\n                  \"Blockquote\"\r\n                ]\r\n              }\r\n            ],\r\n            fontSize_defaultLabel: \"12px\",\r\n            autoParagraph: false,\r\n            customConfig: \"\",\r\n            disallowedContent: \"img{width,height,float}\",\r\n            extraAllowedContent: \"img[width,height,align]\",\r\n            height: 300,\r\n            bodyClass: \"document-editor\",\r\n            format_tags: \"p;h1;h2;h3;pre\",\r\n            removeDialogTabs: \"image:advanced;link:advanced\",\r\n            stylesSet: [\r\n              /* Inline Styles */\r\n              {\r\n                name: \"Marker\",\r\n                element: \"span\",\r\n                attributes: { class: \"marker\" }\r\n              },\r\n              { name: \"Cited Work\", element: \"cite\" },\r\n              { name: \"Inline Quotation\", element: \"q\" },\r\n              /* Object Styles */\r\n              {\r\n                name: \"Special Container\",\r\n                element: \"div\",\r\n                styles: {\r\n                  padding: \"5px 10px\",\r\n                  background: \"#eee\",\r\n                  border: \"1px solid #ccc\"\r\n                }\r\n              },\r\n              {\r\n                name: \"Compact table\",\r\n                element: \"table\",\r\n                attributes: {\r\n                  cellpadding: \"5\",\r\n                  cellspacing: \"0\",\r\n                  border: \"1\",\r\n                  bordercolor: \"#ccc\"\r\n                },\r\n                styles: {\r\n                  \"border-collapse\": \"collapse\"\r\n                }\r\n              },\r\n              {\r\n                name: \"Borderless Table\",\r\n                element: \"table\",\r\n                styles: {\r\n                  \"border-style\": \"hidden\",\r\n                  \"background-color\": \"#E6E6FA\"\r\n                }\r\n              },\r\n              {\r\n                name: \"Square Bulleted List\",\r\n                element: \"ul\",\r\n                styles: { \"list-style-type\": \"square\" }\r\n              }\r\n            ]\r\n          };\r\n        }\r\n      },\r\n      readOnly: {\r\n        type: Boolean,\r\n        default: () => true\r\n      }\r\n    },\r\n    data() {\r\n      return { destroyed: false };\r\n    },\r\n    computed: {\r\n      instance() {\r\n        return CKEDITOR.instances[this.id];\r\n      }\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        try {\r\n          if (this.instance) {\r\n            this.update(val);\r\n          }\r\n        } catch (e) {}\r\n      },\r\n      readOnly(value) {\r\n        try {\r\n          if (this.instance) {\r\n            this.instance.setReadOnly(value);\r\n          }\r\n        } catch (e) {\r\n          console.log(e);\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.create();\r\n    },\r\n    beforeDestroy() {\r\n      this.destroy();\r\n    },\r\n    methods: {\r\n      create() {\r\n        if (typeof CKEDITOR === \"undefined\") {\r\n          console.log(\"CKEDITOR is missing (http://ckeditor.com/)\");\r\n        } else {\r\n          if (this.types === \"inline\") {\r\n            CKEDITOR.inline(this.id, this.config);\r\n          } else {\r\n            CKEDITOR.replace(this.id, this.config);\r\n          }\r\n          this.instance.setData(this.value);\r\n          this.instance.on(\"instanceReady\", () => {\r\n            this.instance.setData(this.value);\r\n          });\r\n          this.instance.on(\"change\", this.onChange);\r\n          this.instance.on(\"blur\", this.onBlur);\r\n          this.instance.on(\"focus\", this.onFocus);\r\n        }\r\n        CKEDITOR.on(\"instanceReady\", event => {\r\n          event.editor.setReadOnly(this.readOnly);\r\n        });\r\n      },\r\n      update(val) {\r\n        let html = this.instance.getData();\r\n        if (html !== val) {\r\n          this.instance.setData(val, { internal: false });\r\n        }\r\n      },\r\n      destroy() {\r\n        if (!this.destroyed) {\r\n          this.instance.focusManager.blur(true);\r\n          this.instance.removeAllListeners();\r\n          this.instance.destroy();\r\n          this.destroyed = true;\r\n        }\r\n      },\r\n      onChange() {\r\n        let html = this.instance.getData();\r\n        this.$emit(\"change\", html);\r\n      },\r\n      onBlur() {\r\n        this.$emit(\"blur\", this.instance);\r\n      },\r\n      onFocus() {\r\n        this.$emit(\"focus\", this.instance);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style>\r\n  .ckeditor::after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n</style>\r\n"],"names":["let","this"],"mappings":"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"}