{"version":3,"file":"vue-ckeditor2.js","sources":["../src/Ckeditor.vue"],"sourcesContent":["<template>\r\n  <div class=\"ckeditor\">\r\n    <textarea\r\n      :name=\"name\"\r\n      :id=\"id\"\r\n      :value=\"value\"\r\n      :types=\"types\"\r\n      :config=\"config\"\r\n      :read-only=\"readOnly\">\r\n    </textarea>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  let inc = new Date().getTime();\r\n\r\n  export default {\r\n    name: \"vue-ckeditor\",\r\n    props: {\r\n      name: {\r\n        type: String,\r\n        default: () => `editor-${++inc}`\r\n      },\r\n      value: {\r\n        type: String\r\n      },\r\n      id: {\r\n        type: String,\r\n        default: () => `editor-${inc}`\r\n      },\r\n      types: {\r\n        type: String,\r\n        default: () => `classic`\r\n      },\r\n      config: {\r\n        type: Object,\r\n        default: () => {}\r\n      },\r\n      readOnly: {\r\n        type: Boolean,\r\n        default: () => false\r\n      }\r\n    },\r\n    data() {\r\n      return { destroyed: false };\r\n    },\r\n    computed: {\r\n      instance() {\r\n        return CKEDITOR.instances[this.id];\r\n      }\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        try {\r\n          if (this.instance) {\r\n            this.update(val);\r\n          }\r\n        } catch (e) {}\r\n      },\r\n      readOnly(value) {\r\n        try {\r\n          if (this.instance) {\r\n            this.instance.setReadOnly(value);\r\n          }\r\n        } catch (e) {\r\n          console.log(e);\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.create();\r\n    },\r\n    beforeDestroy() {\r\n      this.destroy();\r\n    },\r\n    methods: {\r\n      create() {\r\n        if (typeof CKEDITOR === \"undefined\") {\r\n          console.log(\"CKEDITOR is missing (http://ckeditor.com/)\");\r\n        } else {\r\n          if (this.types === \"inline\") {\r\n            CKEDITOR.inline(this.id, this.config);\r\n          } else {\r\n            CKEDITOR.replace(this.id, this.config);\r\n          }\r\n          this.instance.setData(this.value);\r\n          this.instance.on(\"instanceReady\", () => {\r\n            this.instance.setData(this.value);\r\n          });\r\n          this.instance.on(\"change\", this.onChange);\r\n          this.instance.on(\"blur\", this.onBlur);\r\n          this.instance.on(\"focus\", this.onFocus);\r\n        }\r\n        CKEDITOR.on(\"instanceReady\", event => {\r\n          event.editor.setReadOnly(this.readOnly);\r\n        });\r\n      },\r\n      update(val) {\r\n        let html = this.instance.getData();\r\n        if (html !== val) {\r\n          this.instance.setData(val, { internal: false });\r\n        }\r\n      },\r\n      destroy() {\r\n        if (!this.destroyed) {\r\n          this.instance.focusManager.blur(true);\r\n          this.instance.removeAllListeners();\r\n          this.instance.destroy();\r\n          this.destroyed = true;\r\n        }\r\n      },\r\n      onChange() {\r\n        let html = this.instance.getData();\r\n        if (html !== this.value) {\r\n          this.$emit(\"input\", html);\r\n        }\r\n      },\r\n      onBlur() {\r\n        this.$emit(\"blur\", this.instance);\r\n      },\r\n      onFocus() {\r\n        this.$emit(\"focus\", this.instance);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style>\r\n  .ckeditor::after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n</style>\r\n"],"names":["let","this"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;AAcAA,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;;AAE/B,eAAe,CAAC;EACd,IAAI,EAAE,cAAc;EACpB,KAAK,EAAE;IACL,IAAI,EAAE;MACJ,IAAI,EAAE,MAAM;MACZ,OAAO,cAAK,uBAAa,EAAE,GAAG,KAAE;KACjC;IACD,KAAK,EAAE;MACL,IAAI,EAAE,MAAM;KACb;IACD,EAAE,EAAE;MACF,IAAI,EAAE,MAAM;MACZ,OAAO,cAAK,sBAAa,GAAG,IAAE;KAC/B;IACD,KAAK,EAAE;MACL,IAAI,EAAE,MAAM;MACZ,OAAO,cAAK,SAAG,YAAS;KACzB;IACD,MAAM,EAAE;MACN,IAAI,EAAE,MAAM;MACZ,OAAO,cAAK,EAAK;KAClB;IACD,QAAQ,EAAE;MACR,IAAI,EAAE,OAAO;MACb,OAAO,cAAK,SAAG,QAAK;KACrB;GACF;EACD,mBAAI,GAAG;IACL,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;GAC7B;EACD,QAAQ,EAAE;IACR,2BAAQ,GAAG;MACT,OAAO,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACpC;GACF;EACD,KAAK,EAAE;IACL,qBAAK,CAAC,GAAG,EAAE;MACT,IAAI;QACF,IAAI,IAAI,CAAC,QAAQ,EAAE;UACjB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAClB;OACF,CAAC,OAAO,CAAC,EAAE,EAAE;KACf;IACD,2BAAQ,CAAC,KAAK,EAAE;MACd,IAAI;QACF,IAAI,IAAI,CAAC,QAAQ,EAAE;UACjB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAClC;OACF,CAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;OAChB;KACF;GACF;EACD,yBAAO,GAAG;IACR,IAAI,CAAC,MAAM,EAAE,CAAC;GACf;EACD,qCAAa,GAAG;IACd,IAAI,CAAC,OAAO,EAAE,CAAC;GAChB;EACD,OAAO,EAAE;IACP,uBAAM,GAAG;;;MACP,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE;QACnC,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;OAC3D,MAAM;QACL,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE;UAC3B,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACvC,MAAM;UACL,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACxC;QACD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,eAAe,cAAK;UACnCC,MAAI,CAAC,QAAQ,CAAC,OAAO,CAACA,MAAI,CAAC,KAAK,CAAC,CAAC;SACnC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;OACzC;MACD,QAAQ,CAAC,EAAE,CAAC,eAAe,YAAE,OAAM;QACjC,KAAK,CAAC,MAAM,CAAC,WAAW,CAACA,MAAI,CAAC,QAAQ,CAAC,CAAC;OACzC,CAAC,CAAC;KACJ;IACD,uBAAM,CAAC,GAAG,EAAE;MACVD,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;MACnC,IAAI,IAAI,KAAK,GAAG,EAAE;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;OACjD;KACF;IACD,yBAAO,GAAG;MACR,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;QACnB,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;OACvB;KACF;IACD,2BAAQ,GAAG;MACTA,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;MACnC,IAAI,IAAI,KAAK,IAAI,CAAC,KAAK,EAAE;QACvB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;OAC3B;KACF;IACD,uBAAM,GAAG;MACP,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACnC;IACD,yBAAO,GAAG;MACR,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;KACpC;GACF;CACF,CAAC;;;;;;;;"}