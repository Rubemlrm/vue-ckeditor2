{"version":3,"file":"vue-ckeditor2.js","sources":["../src/Ckeditor.vue"],"sourcesContent":["<template>\r\n  <div class=\"ckeditor\">\r\n    <textarea\r\n      :name=\"name\"\r\n      :id=\"id\"\r\n      :value=\"value\"\r\n      :types=\"types\"\r\n      :config=\"config\"\r\n      :read-only=\"readOnly\"\r\n    >\r\n    </textarea>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  let inc = new Date().getTime()\r\n\r\n  export default {\r\n    name: 'vue-ckeditor',\r\n    props: {\r\n      name: {\r\n        type: String,\r\n        default: () => `editor-${++inc}`\r\n      },\r\n      value: {\r\n        type: String\r\n      },\r\n      id: {\r\n        type: String,\r\n        default: () => `editor-${inc}`\r\n      },\r\n      types: {\r\n        type: String,\r\n        default: () => `classic`\r\n      },\r\n      config: {\r\n        type: Object,\r\n        default: () => {}\r\n      },\r\n      readOnly: {\r\n        type: Boolean,\r\n        default: () => true\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        destroyed: false,\r\n        mergedConfig: {},\r\n        defaultConfigOptions: {\r\n          toolbar: [\r\n            { name: 'clipboard', items: ['Undo', 'Redo'] },\r\n            {\r\n              name: 'basicstyles',\r\n              items: [\r\n                'Bold',\r\n                'Italic',\r\n                'Underline',\r\n                'Strike',\r\n                'RemoveFormat',\r\n                'CopyFormatting'\r\n              ]\r\n            },\r\n            {\r\n              name: 'align',\r\n              items: [\r\n                'JustifyLeft',\r\n                'JustifyCenter',\r\n                'JustifyRight',\r\n                'JustifyBlock'\r\n              ]\r\n            },\r\n            {\r\n              name: 'paragraph',\r\n              items: [\r\n                'NumberedList',\r\n                'BulletedList',\r\n                '-',\r\n                'Outdent',\r\n                'Indent',\r\n                '-',\r\n                'Blockquote'\r\n              ]\r\n            }\r\n          ],\r\n          fontSize_defaultLabel: '12px',\r\n          autoParagraph: false,\r\n          allowedContent: false,\r\n          customConfig: '',\r\n          disallowedContent: 'img{width,height,float}',\r\n          extraAllowedContent: 'img[width,height,align]',\r\n          height: 300,\r\n          bodyClass: 'document-editor',\r\n          format_tags: 'p;h1;h2;h3;pre',\r\n          removeDialogTabs: 'image:advanced;link:advanced',\r\n          stylesSet: [\r\n            /* Inline Styles */\r\n            {\r\n              name: 'Marker',\r\n              element: 'span',\r\n              attributes: { class: 'marker' }\r\n            },\r\n            { name: 'Cited Work', element: 'cite' },\r\n            { name: 'Inline Quotation', element: 'q' },\r\n            /* Object Styles */\r\n            {\r\n              name: 'Special Container',\r\n              element: 'div',\r\n              styles: {\r\n                padding: '5px 10px',\r\n                background: '#eee',\r\n                border: '1px solid #ccc'\r\n              }\r\n            },\r\n            {\r\n              name: 'Compact table',\r\n              element: 'table',\r\n              attributes: {\r\n                cellpadding: '5',\r\n                cellspacing: '0',\r\n                border: '1',\r\n                bordercolor: '#ccc'\r\n              },\r\n              styles: {\r\n                'border-collapse': 'collapse'\r\n              }\r\n            },\r\n            {\r\n              name: 'Borderless Table',\r\n              element: 'table',\r\n              styles: {\r\n                'border-style': 'hidden',\r\n                'background-color': '#E6E6FA'\r\n              }\r\n            },\r\n            {\r\n              name: 'Square Bulleted List',\r\n              element: 'ul',\r\n              styles: { 'list-style-type': 'square' }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      instance() {\r\n        return CKEDITOR.instances[this.id]\r\n      }\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        try {\r\n          if (this.instance) {\r\n            this.update(val)\r\n          }\r\n        } catch (e) {}\r\n      },\r\n      readOnly(value) {\r\n        try {\r\n          if (this.instance) {\r\n            this.instance.setReadOnly(value)\r\n          }\r\n        } catch (e) {\r\n          console.log(e)\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      Object.extend = function(defaultOptions, userOptions) {\r\n        for (var property in userOptions) {\r\n          if (\r\n            userOptions.hasOwnProperty(property) &&\r\n            Array.isArray(userOptions[property])\r\n          ) {\r\n            for (var index in userOptions[property]) {\r\n              for (var index2 in defaultOptions[property]) {\r\n                if (\r\n                  defaultOptions[property][index2]['name'] ==\r\n                  userOptions[property][index]['name']\r\n                ) {\r\n                  defaultOptions[property][index2] = userOptions[property][index]\r\n                }\r\n              }\r\n            }\r\n          } else if (\r\n            userOptions.hasOwnProperty(property) &&\r\n            typeof userOptions[property] === 'object'\r\n          ) {\r\n            Object.extend(defaultOptions[property], userOptions[property])\r\n          } else if (userOptions.hasOwnProperty(property)) {\r\n            defaultOptions[property] = userOptions[property]\r\n          }\r\n        }\r\n        return defaultOptions\r\n      }\r\n      this.mergedConfig = Object.extend(this.defaultConfigOptions, this.config)\r\n      this.create()\r\n    },\r\n    beforeDestroy() {\r\n      this.destroy()\r\n    },\r\n    methods: {\r\n      create() {\r\n        if (typeof CKEDITOR === 'undefined') {\r\n          console.log('CKEDITOR is missing (http://ckeditor.com/)')\r\n        } else {\r\n          if (this.types === 'inline') {\r\n            CKEDITOR.inline(this.id, this.mergedConfig)\r\n          } else {\r\n            CKEDITOR.replace(this.id, this.mergedConfig)\r\n          }\r\n          this.instance.setData(this.value)\r\n          this.instance.on('instanceReady', () => {\r\n            this.instance.setData(this.value)\r\n          })\r\n          this.instance.on('change', this.onChange)\r\n          this.instance.on('blur', this.onBlur)\r\n          this.instance.on('focus', this.onFocus)\r\n        }\r\n        CKEDITOR.on('instanceReady', event => {\r\n          event.editor.setReadOnly(this.readOnly)\r\n        })\r\n      },\r\n      update(val) {\r\n        let html = this.instance.getData()\r\n        if (html !== val) {\r\n          this.instance.setData(val, { internal: false })\r\n        }\r\n      },\r\n      destroy() {\r\n        if (!this.destroyed) {\r\n          this.instance.focusManager.blur(true)\r\n          this.instance.removeAllListeners()\r\n          this.instance.destroy()\r\n          this.destroyed = true\r\n        }\r\n      },\r\n      onChange() {\r\n        let html = this.instance.getData()\r\n        this.$emit('change', html)\r\n      },\r\n      onBlur() {\r\n        this.$emit('blur', this.instance)\r\n      },\r\n      onFocus() {\r\n        this.$emit('focus', this.instance)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .ckeditor::after {\r\n    content: '';\r\n    display: table;\r\n    clear: both;\r\n  }\r\n</style>"],"names":["let","this"],"mappings":"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"}